---
timezone: UTC+8
---

# kaka

**GitHub ID:** kaka666111

**Telegram:** @kaka

## Self-introduction

共同学习

## Notes

<!-- Content_START -->
# 2025-10-17
<!-- DAILY_CHECKIN_2025-10-17_START -->
🧩 一句话总结

**ERC-8004 让不同组织或个人创建的 AI Agent 能够在区块链上“发现、验证、互相信任并协作”，无需中心化信任。**

* * *

🌐 背景与动机（Motivation）

以往的 **MCP（Model Context Protocol）** 和 **A2A（Agent-to-Agent）** 协议解决了：

-   Agent 的通信；
    
-   能力展示（AgentCard）；
    
-   任务生命周期管理。
    

但——它们**没有**解决两个关键问题：

1.  如何**发现**新代理（agent discovery）
    
2.  如何**建立信任**（trust establishment）
    

于是 ERC-8004 出现：  
它用\*\*链上注册表（registries）\*\*系统化地解决了“开放环境下的代理发现与信任问题”。

* * *

## 🧱 三大注册表机制（核心）

| 注册表 | 功能 | 类比 |
| --- | --- | --- |
| Identity Registry（身份注册表） | 为每个 Agent 创建唯一可验证身份（ERC-721 NFT） | 类似于“数字身份证” |
| Reputation Registry（信誉注册表） | 记录用户或其他代理对某个 Agent 的反馈评分 | 类似于“链上评分系统 / 匿名评论” |
| Validation Registry（验证注册表） | 用于提交和验证独立第三方验证请求（如 TEE、zkML、Stake 验证） | 类似于“审计/验真机构” |

* * *

## 🧬 信任模型（Trust Models）

ERC-8004 的信任系统是**可插拔、可分层**的，安全性可按任务价值调整：

| 层级 | 信任方式 | 应用场景 |
| --- | --- | --- |
| 🔹 声誉信任（Reputation-based） | 通过历史反馈与评分建立信任 | 低风险任务，如聊天、内容推荐 |
| 🔸 加密验证（Crypto-economic validation） | 通过质押重执行、zkML、TEE 验证 | 高风险任务，如诊断、金融预测 |
| 🔹 混合信任（Hybrid） | 结合声誉 + 验证机制 | 需要长期稳定服务的复杂系统 |

* * *

## 🧩 Identity Registry 示例

每个代理是一个 NFT（ERC-721），metadata 指向一个 JSON 文件，例如：

```json
{
  "name": "SmartAgent Alpha",
  "description": "An autonomous trading agent for DeFi tasks",
  "image": "https://example.com/agent.png",
  "endpoints": [
    {"name": "A2A", "endpoint": "https://agent.example/.well-known/agent-card.json"},
    {"name": "MCP", "endpoint": "https://mcp.agent.eth/", "version": "2025-06-18"}
  ],
  "supportedTrust": ["reputation", "crypto-economic", "tee-attestation"]
}
```

→ 类似于 ERC-721 + 扩展元数据（用于多链可发现）。

* * *

## ⭐ Reputation Registry 示例

每个用户（或代理）可以对另一个代理进行评分：

```solidity
giveFeedback(agentId, score, tag1, tag2, fileUri, fileHash, feedbackAuth)
```

反馈信息包括：

-   **score**（0–100）
    
-   **tag1/tag2**（标签）
    
-   **fileuri + filehash**（链下 JSON 详细描述）
    
-   **签名授权 feedbackAuth**（确保反馈真实性）
    

这样其他合约或系统可以查询：

```solidity
getSummary(agentId) → (count, averageScore)
```

→ 相当于链上“去中心化的评价系统”。

* * *

## 🧠 Validation Registry 示例

用于任务验证，例如：

```solidity
validationRequest(
  validatorAddress, // 验证合约
  agentId,
  requestUri,      // 请求数据（可在IPFS上）
  requestHash
)
```

验证器可以是：

-   **质押者**（stake re-execution）
    
-   **TEE 预言机**
    
-   **zkML 验证器**
    

→ 可扩展为“去中心化审计机制”。

* * *

## 🧩 设计逻辑与安全考虑

-   支持多链部署（EVM兼容）
    
-   基于 ERC-721 / ERC-1271 / EIP-191 签名体系
    
-   支持链上与链下数据混合（IPFS、HTTP）
    
-   防止女巫攻击（需信誉过滤 + 验证机制）
    
-   可被任意 DApp 组合使用（composability）
    

* * *

## 💡 实际应用场景

| 场景 | 示例 |
| --- | --- |
| AI Agent 发现与排名 | 用户可在链上搜索可信 AI 助手，按评分排序 |
| DAO 自动化代理市场 | DAO 雇佣 ERC-8004 代理执行任务，链上记录反馈 |
| Web3 服务审计网络 | zkML/TEE 验证代理执行是否正确 |
| 多代理协作 | Agents 相互验证、协作、反馈形成“信任网” |

* * *

## 🪐 与其他协议关系

| 协议 | 作用 | 与 ERC-8004 的关系 |
| --- | --- | --- |
| MCP | 模型通信协议 | 提供接口层 |
| A2A | 代理到代理通信 | 提供通信基础 |
| x402 | 支付证明 | 可用于反馈验证 |
| ERC-8004 | 身份、声誉、验证机制 | 信任层（Trust Layer） |

* * *

## 🧭 总结

| 特点 | 描述 |
| --- | --- |
| 🔗 去中心化身份 | 每个代理是一个 NFT |
| 💬 链上声誉系统 | 可被任何合约读取和复用 |
| 🧾 可验证交互 | 支持 zk/TEE 等验证模型 |
| 🧰 可组合性 | 设计上为其他协议提供信任模块 |
| 🪄 应用前景 | 可信 AI 市场、跨组织协作、自治服务网络 |

* * *
<!-- DAILY_CHECKIN_2025-10-17_END -->
<!-- Content_END -->
