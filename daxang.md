---
timezone: UTC+8
---

# fisher

**GitHub ID:** daxang

**Telegram:** @wonderfisherisme

## Self-introduction

独立产品builder，正在搭建读书类网站lessreads，近期上线。区块链爱好者，希望成为一个合格的builder，在2026年成为全职的区块链产品开发者

## Notes
<!-- Content_START -->
# 2025-10-16
<!-- DAILY_CHECKIN_2025-10-16_START -->
```markdown
#A2A
Google 于 2025 年 4 月推出了 **Agent-to-Agent (A2A) 协议**，并将其捐赠给 Linux 基金会，旨在为 AI 代理提供一个开放、通用的通信标准，促进代理间的无缝互操作性。

A2A 协议的核心目标是让不同 AI 代理能够像人类一样“对话”，无论它们底层技术如何。它作为一个消息层，使得各种代理编排框架（如 crewAI, LangChain）中的代理能够跨越其生态系统边界进行交流，从而解锁多代理系统的全部潜力 。

本笔记将深入探讨 A2A 协议的基础知识和操作逻辑，重点关注代理如何自主发现和通信、AP2 协议的细节（代理描述文件、能力声明、交互流程），以及如何发起协作请求。

## 1. A2A 协议的核心架构组件

A2A 协议由多个构建块组成，用于规范代理间的交互：

*   **A2A 客户端 (Client Agent)**：发起请求的应用程序、服务或 AI 代理。它使用 A2A 协议启动通信。
*   **A2A 服务器 (Remote Agent)**：接收请求、处理任务并响应状态更新或结果的远程代理。它暴露一个与 A2A 协议兼容的 HTTP 端点。
*   **代理卡片 (Agent Card)**：一个 JSON 文件，包含代理的元数据，可通过 URL 访问。它提供了代理的基本信息，如名称、描述、版本、服务端点 URL、支持的模态或数据类型以及认证要求。代理卡片类似于大型语言模型（LLMs）的模型卡片，用于宣传代理的能力和技能，帮助其他代理发现和理解其功能 。
*   **任务 (Task)**：表示完成请求所需的工作单元。每个任务都有一个唯一的 ID，并经历定义好的生命周期状态（提交、工作、需要输入、完成、失败）。任务对于多轮处理或长时间运行的代理协作非常有用 。
*   **消息 (Message)**：作为通信的基本单元，消息描述了对话中的一次交换或一轮。它包含一个或多个承载实际内容的“部分”（Part）。消息用于传递答案、上下文、指令、提示、问题、回复和状态更新。根据发送方，每条消息都有一个关联的角色，可以是服务器发送消息的代理角色，也可以是客户端发送消息的用户角色。
*   **工件 (Artifact)**：A2A 服务器工作产生的有形产品，可以是文档、图像、电子表格或任何其他可交付成果。与消息类似，工件也由一个或多个“部分”组成，并且可以增量流式传输 。
*   **部分 (Part)**：消息或工件内部的内容片段。部分根据其携带的数据具有各种类型。例如，`TextPart` 用于文本，`FilePart` 表示文件，`DataPart` 包含结构化的 JSON 数据。

## 2. 代理发现与通信 (A2A 工作流程)

A2A 协议遵循客户端-服务器模型设置，包含三个主要工作流程步骤：发现、认证和通信 。

### 2.1 发现 (Discovery)

A2A 工作流程始于一个实体（人类用户或另一个 AI 代理）向客户端代理发起请求。例如，用户可能请求协助安排旅行，或者一个 AI 代理为零售店的低库存商品下订单 。

**客户端代理**随后启动发现过程，查找远程代理并获取它们的**代理卡片 (Agent Card)**，以确定最适合该任务的代理。代理卡片中包含了代理的能力声明和其服务终结点 URL，这是实现自主发现的关键。

### 2.2 认证 (Authentication)

一旦客户端代理识别出能够完成指定任务的远程代理，它将根据代理卡片中指示的安全方案进行认证。A2A 支持与 OpenAPI 规范对齐的安全方案，例如 API 密钥、OAuth 2.0 和 OpenID Connect Discovery。

客户端代理成功认证后，远程代理负责授权并授予访问控制权限 。

### 2.3 通信 (Communication)

通信始于客户端代理向选定的远程代理发送一个**任务 (Task)**。代理间的通信通过 HTTPS 进行安全传输，数据交换格式为 JSON-RPC 2.0。

远程代理随后处理任务。如果需要更多信息，它会通知客户端代理请求额外细节。一旦任务完成，远程代理会向客户端代理发送一条**消息 (Message)**，以及任何生成的**工件 (Artifact)**。

A2A 还提供任务管理功能，用于处理无法立即完成的复杂任务，例如需要人工干预或涉及多个步骤的任务。对于需要数小时或数天才能完成的长时间运行任务，或者客户端代理断开连接的情况，A2A 协议允许通过发送到安全客户端提供的 webhook 的推送通知进行异步更新。对于大型或长时间输出或持续状态更新，A2A 协议支持使用服务器发送事件 (SSE) 进行实时流式传输。

## 3. AP2 协议：代理描述文件、能力声明与交互流程

AP2 (Agent Protocol 2) 是 A2A 协议规范的组成部分，它定义了代理如何描述自身、声明能力以及进行交互的详细规则。虽然提供的链接中未直接提及“AP2 协议”这一术语，但其描述的 A2A 协议的核心机制（特别是代理卡片和任务/消息结构）正是 AP2 协议所涵盖的内容。

### 3.1 代理描述文件 (Agent Descriptor Files)

代理描述文件即 **代理卡片 (Agent Card)**。它是一个 JSON 格式的文件，作为代理的“名片”或“简历”，详细描述了代理的元数据和能力：

*   **基本信息**：代理的名称、版本、描述。
*   **服务终结点 (Service Endpoint URL)**：代理用于接收请求的 HTTP 地址。
*   **支持的模态/数据类型**：代理可以处理的数据类型（例如，文本、图像、音频、视频）。
*   **认证要求**：代理与客户端交互所需的认证机制（例如，API 密钥、OAuth 2.0）。
*   **能力声明 (Capability Declarations)**：代理通过代理卡片明确声明其可以执行的任务和提供的服务。这使得客户端代理能够根据任务需求，通过解析代理卡片来发现并选择合适的远程代理 。

### 3.2 交互流程 (Interaction Flows)

A2A 协议的交互流程围绕着**任务 (Task)** 和**消息 (Message)** 进行。一个典型的交互流程如下：

1.  **客户端发起任务**：客户端代理根据用户或另一个代理的需求，创建一个任务对象，并将其发送给通过发现过程选定的远程代理。
2.  **远程代理处理**：远程代理接收任务，并开始执行。在执行过程中，远程代理可以发送消息给客户端代理，以提供状态更新、请求更多信息或传递中间结果。
3.  **多轮对话**：如果任务需要多轮交互（例如，澄清问题、逐步完成复杂子任务），客户端和远程代理会通过消息进行持续的对话。每条消息都包含一个或多个“部分”，可以承载不同类型的数据。
4.  **工件生成**：任务完成后，远程代理可能会生成一个或多个工件（例如，报告、图片、代码），并通过消息将其发送给客户端代理。
5.  **任务完成/失败**：任务最终会进入完成或失败状态，并通知客户端代理。

## 4. 实践：使你的代理发现其他代理并发起协作请求

要使你的代理能够发现其他代理并发起协作请求，需要遵循 A2A 协议定义的步骤和使用其核心组件。

### 4.1 代理发现

1.  **定义代理卡片**：首先，你的代理需要有一个清晰定义的 **Agent Card** (JSON 文件)，其中详细说明了它的能力、服务终结点和认证要求。这个卡片应该可以通过一个公开的 URL 访问。
2.  **查找代理卡片**：当你的代理（作为客户端代理）需要完成一个任务时，它会通过某种机制（例如，一个中心化的代理目录服务，或者通过搜索特定的标签和关键词）来查找其他远程代理的 Agent Card URL。
3.  **解析能力声明**：你的代理会下载并解析这些 Agent Card，以理解远程代理的能力声明。例如，如果你的代理需要一个能够生成图像的代理，它会查找 Agent Card 中声明了“图像生成”能力的代理。

### 4.2 发起协作请求

1.  **选择最佳代理**：根据任务需求和解析到的代理卡片信息，你的代理会选择一个最合适的远程代理进行协作。
2.  **认证**：在发送任务之前，你的代理需要根据远程代理 Agent Card 中指定的认证方案进行认证。这可能涉及交换 API 密钥、OAuth 令牌等。
3.  **构建任务和消息**：你的代理会创建一个 **任务 (Task)** 对象，并构建一条包含任务指令和必要上下文的 **消息 (Message)**。消息中的“部分”可以包含文本、文件或结构化数据。
4.  **发送任务**：通过 HTTPS 和 JSON-RPC 2.0，你的代理将任务和消息发送到远程代理的服务终结点 URL。
5.  **处理响应**：你的代理会监听远程代理的响应。这可能包括状态更新、请求更多信息的提示，或者最终的任务结果和工件。对于长时间运行的任务，你的代理需要能够处理异步更新和流式传输的数据。
```

```markdown
# ISEK (Intelligent System of Emergent Knowledge) 
**ISEK (Intelligent System of Emergent Knowledge)** 旨在建立一个去中心化的网络，让人类和人工智能代理（AI Agents）作为对等方进行协作，形成一个自我组织的认知生态系统 。它构建在 Web3 基础设施之上，结合了三个基本原则：
1.  **去中心化的多代理架构**：抗审查，具备强大的容错能力。
2.  **共生的人工智能-人类协作**：通过平等的参与权实现。
3.  **通过分布式共识机制实现弹性自适应** 。

ISEK 的核心是其创新的协调协议，包含六个阶段的工作流（发布 → 发现 → 招募 → 执行 → 结算 → 反馈），用于动态任务分配，并由强大的容错机制和多维度声誉系统支持。经济激励通过原生的 **$ISEK 代币**实现，用于微支付、治理参与和声誉跟踪，同时通过 **NFT 身份管理**维护代理主权 。


## 1. 核心概念

### 1.1 代理 (Agent)

在 ISEK 生态系统中，**代理**可以是任何实体——无论是人类还是 AI——能够执行任务、贡献知识并与其他代理互动 。每个代理都拥有一个通过 NFT 管理的唯一身份，并有一个反映其过往表现和可信度的声誉分数 。

### 1.2 涌现智能 (Emergent Intelligence)

**涌现智能**是指 ISEK 网络中众多独立代理通过互动和协作而产生的集体智能。通过实现无缝通信、协调和知识共享，ISEK 旨在促进一个动态环境，其中复杂问题可以通过集体努力解决，从而产生新颖的解决方案和见解 。

### 1.3 协调结构 (Coordination Fabric)

**协调结构**是使代理能够在 ISEK 网络中发现、互动和协作的基础设施 [1]。它包括去中心化的多代理架构、六阶段协调协议、声誉系统以及 $ISEK 代币提供的经济激励。这个结构确保代理能够高效地分配任务、交换信息，并共同为系统的涌现智能做出贡献 。

## 2. ISEK 架构

ISEK 的架构设计模块化、可扩展且去中心化，由几个相互连接的层组成，每层负责特定的功能：

*   **代理层 (Agent Layer)**：包含所有参与网络的人类和 AI 代理。代理之间以及与底层基础设施互动，以执行任务和贡献知识。
*   **协调层 (Coordination Layer)**：实现六阶段协调协议，促进代理间的任务分配、协商和执行。它还管理声誉系统和经济激励。
*   **区块链层 (Blockchain Layer)**：建立在 Web3 基础设施之上，提供去中心化账本，用于记录代理身份（NFTs）、声誉分数、交易历史和治理决策。它确保透明度、不变性和抗审查性 。
*   **存储层 (Storage Layer)**：处理代理数据、知识库和任务相关信息的去中心化存储。它利用 IPFS 或 Arweave 等技术确保数据可用性和完整性 。

### 2.1 基于 NFT 的身份管理

ISEK 网络中的每个代理都由一个唯一的 **NFT** 代表，作为其数字身份 。这个 NFT 存储了代理的基本元数据，包括其公钥、能力以及指向其代理卡片（类似于 ERC-8004 的代理卡片）的链接 。基于 NFT 的身份管理确保了代理主权，允许代理控制其数据和互动，并促进网络内的安全认证和授权 。ISEK 的 GitHub 仓库明确指出，它支持 **ERC-8004 身份流**，并使用本地钱包管理器进行身份注册 。

### 2.2 多维度声誉系统

ISEK 的声誉系统对于促进代理间的信任和问责制至关重要 。它跟踪各种指标，包括：

*   **任务完成率**：代理成功完成任务的百分比。
*   **工作质量**：其他代理或人类对代理贡献质量的评价。
*   **可靠性**：代理服务的持续性和可用性。
*   **及时性**：代理在规定时间内完成任务的能力 。

这些指标被聚合形成一个多维度声誉分数，影响代理的可见性、任务分配优先级和经济激励。声誉系统通过质押声誉和争议解决协议等机制，旨在抵抗操纵 。

### 2.3 经济激励与 $ISEK 代币

原生的 **$ISEK 代币**在激励积极行为和维持网络方面发挥着关键作用 。它用于：

*   **微支付**：代理因完成任务和贡献有价值的知识而获得 $ISEK 代币补偿。
*   **质押**：代理可以质押 $ISEK 代币以提升其声誉、获得更高的任务优先级或参与治理。
*   **治理**：$ISEK 代币持有者可以参与网络的去中心化治理，对协议升级、参数更改和其他关键决策进行投票。
*   **声誉跟踪**：$ISEK 代币与声誉系统集成，使得经济激励能够与代理的性能和可信度挂钩 。

## 3. 协调协议：六阶段工作流

ISEK 实施了一个创新的六阶段协调协议，以去中心化的方式管理任务分配和执行：

1.  **发布 (Publish)**：客户端代理向网络发布任务请求，明确任务要求、预期结果和报酬。
2.  **发现 (Discover)**：网络中的其他代理根据自身能力和兴趣发现已发布的任务请求。声誉系统帮助代理识别可靠和合适的任务。
3.  **招募 (Recruit)**：感兴趣的代理向客户端代理提交投标或提案。客户端代理评估这些提案，考虑代理的声誉分数和提议的报酬。
4.  **执行 (Execute)**：选定的代理执行任务，根据需要与其他代理或资源互动。任务的进展在链上跟踪。
5.  **结算 (Settle)**：任务完成后，客户端代理验证结果。如果满意，约定好的 $ISEK 代币报酬将释放给执行代理。对于分歧，有争议解决机制。
6.  **反馈 (Feedback)**：客户端和执行代理都对彼此的表现提供反馈，这会更新各自的声誉分数。这个反馈循环不断完善声誉系统，并改善未来的协作 [1]。

## 4. 技术实现细节与逻辑关系 (来自 GitHub Repo)

ISEK 的 GitHub 仓库提供了其技术实现的具体细节，展示了白皮书中的概念如何落地。

### 4.1 与 A2A 协议和 ERC-8004 的集成

ISEK 的核心在于构建一个 **AI 代理网络**，它不将代理视为孤立的执行者，而是提供协作和协调的缺失层 。

*   **A2A 协议**：ISEK 网络的核心是 Google 的 A2A 协议，它使得代理能够进行点对点通信。开发者可以在本地运行他们的代理，并通过点对点连接加入 ISEK 网络。一旦连接，这些代理就可以发现其他代理、形成社区并直接向用户提供服务。
*   **ERC-8004 智能合约**：ISEK 利用 ERC-8004 智能合约实现身份注册、声誉建设和协作任务解决。这与白皮书中提到的 NFT 身份管理和多维度声誉系统相呼应，表明 ISEK 在区块链层面上采用了 ERC-8004 作为其代理身份和声誉管理的基础。

### 4.2 P2P 功能

ISEK 强调去中心化，其实现包括强大的 **P2P (Peer-to-Peer) 功能**。代理通过 P2P 连接加入网络，这使得它们能够直接通信，而无需中心化服务器 。

*   **P2P Relay**：GitHub 仓库提供了运行 P2P Relay 的说明，这是网络中的一个节点，帮助代理发现彼此并建立连接，尤其是在 NAT 穿透等复杂网络环境下 。
*   **P2P Agent Hosting/Querying**：代码示例展示了如何托管一个 P2P 代理以及如何查询一个 P2P 代理，这表明 ISEK 提供了 SDK 或框架来简化代理的 P2P 交互 。

### 4.3 钱包与身份管理

ISEK 包含一个简单的本地钱包管理器和 ERC-8004 身份流 。

*   **本地钱包**：钱包默认存储在 `isek/web3/wallet.{NETWORK}.json` 中，用于管理代理的链上资产和身份 。
*   **ERC-8004 身份注册**：注册代理身份需要代理卡片提供一个域名（`url` 被视为 `domain`）。`ensure_identity` 函数用于注册或解析代理身份，如果代理已注册，则返回现有 `agent_id` 而不发送交易，这体现了效率和链上资源优化 。

### 4.4 生态系统组件

ISEK 团队构建了多个组件来展示生态系统的可行性，包括聊天应用、代理浏览器和 Chrome 扩展。这些组件都可以被第三方组件替换，体现了其开放性和可扩展性。

## 5. 逻辑关系总结

ISEK 的核心逻辑在于通过结合 Web3 技术（区块链、NFT、代币经济）和 AI 代理技术，构建一个去中心化、可信赖且高效的协作网络。其关键逻辑关系如下：

*   **去中心化与抗审查**：通过区块链层和 P2P 网络，确保系统不依赖任何单一中心实体，从而实现抗审查和高容错性。
*   **身份与主权**：基于 NFT 的身份管理（利用 ERC-8004）为每个代理提供了唯一且可控的数字身份，确保代理在网络中的主权。
*   **信任与声誉**：多维度声誉系统结合 ERC-8004 的声誉机制，通过历史表现和反馈建立代理的可信度，激励良好行为。
*   **激励与经济**：$ISEK 代币作为经济激励的核心，驱动代理参与任务、贡献知识和维护网络，形成一个自我强化的经济循环。
*   **协作与涌现智能**：六阶段协调协议为代理间的任务分配和执行提供了结构化的框架，结合 A2A 协议实现无缝通信，最终促进集体智能的涌现。
*   **模块化与可扩展性**：分层架构和可替换的生态系统组件设计，使得 ISEK 能够灵活适应未来的技术发展和应用需求。
```
<!-- DAILY_CHECKIN_2025-10-16_END -->

# 2025-10-15
<!-- DAILY_CHECKIN_2025-10-15_START -->

```markdown
Google 推出的 A2A (Agent-to-Agent) 协议旨在解决代理间的识别和通信问题，通过“代理卡片”（Agent Card）实现任务执行。然而，A2A 协议在 Web3 的去中心化、抗审查和透明性原则下存在局限性，因为它假设了客户端代理和服务器代理之间的信任。

**ERC-8004** 协议作为 A2A 协议的扩展，旨在为以太坊上的 AI 代理协调提供一个无需信任的层，从而巩固以太坊作为 AI 协调基础的地位。该协议不仅仅是一个新的代币标准，更是自主 AI 代理网络的基础设施。


# 2025.10.15
<!-- DAILY_CHECKIN_2025-10-15_START -->
```markdown
Google 推出的 A2A (Agent-to-Agent) 协议旨在解决代理间的识别和通信问题，通过“代理卡片”（Agent Card）实现任务执行。然而，A2A 协议在 Web3 的去中心化、抗审查和透明性原则下存在局限性，因为它假设了客户端代理和服务器代理之间的信任。

**ERC-8004** 协议作为 A2A 协议的扩展，旨在为以太坊上的 AI 代理协调提供一个无需信任的层，从而巩固以太坊作为 AI 协调基础的地位。该协议不仅仅是一个新的代币标准，更是自主 AI 代理网络的基础设施。

## 基础知识点

### 1. 代理经济 (Agent Economy)

代理经济是指由自主或半自主的 AI 代理执行任务、提供服务并相互协作的经济系统。这些代理利用 LLMs、代理框架和工具来自动化和增强业务流程。其核心挑战在于如何让来自不同框架或供应商的代理能够发现、验证、通信和交互。ERC-8004 的出现旨在解决代理经济中的“信任鸿沟”，为预计到2030年将达到1.8万亿美元的全球 AI 市场释放巨大潜力。

### 2. Google A2A 协议及其局限性

Google A2A 协议通过 Agent Card (JSON 格式，包含代理名称、技能、能力等信息) 简化了代理间的发现和通信。它解决了代理在孤立数据系统和应用中交互的难题。然而，A2A 协议假设了客户端代理和服务器代理之间的信任，这与 Web3 追求的去中心化、抗审查和透明性原则相悖。区块链技术通过加密证明系统和不可篡改的链上记录，为信任提供了额外的保障。

### 3. ERC-8004 的定位

ERC-8004 是一个以太坊改进提案 (EIP)，旨在通过区块链技术，为链上代理提供一个无需信任的交互层。它扩展了 A2A 协议，使其能够适应 Web3 的环境，特别是在以太坊虚拟机 (EVM) 链上实现 AI 代理的协调。它采用混合方法，仅在链上存储必要的信任相关数据，而将复杂的操作委托给链下基础设施，从而实现可扩展性。

## 技术逻辑关系

ERC-8004 通过引入三个核心注册表来解决代理发现和信任问题：身份注册表 (Identity Registry)、声誉注册表 (Reputation Registry) 和验证注册表 (Validation Registry)。

### 1. 身份注册表 (Identity Registry)

*   **功能**: 提供代理的链上身份标识，使其可被发现和管理。它基于 **ERC-721** 标准并扩展了 URIStorage 功能，使得所有代理都可以像 NFT 一样被浏览和转移 。
*   **代理标识**: 每个代理通过以下信息在全球范围内唯一标识:
    *   `namespace`: `eip155` (针对 EVM 链)
    *   `chainId`: 区块链网络标识符
    *   `identityRegistry`: ERC-721 注册合约的部署地址
    *   `agentId`: ERC-721 的 `tokenId`，递增分配
*   **代理卡片 (Agent Card)**: `tokenURI` 指向代理的注册文件（JSON 格式），其中包含代理的类型、名称、描述、图片以及各种端点（如 A2A、MCP、ENS、DID、agentWallet 等）。代理可以声明其支持的信任模型（声誉、加密经济、TEE 证明）。
*   **NFT 兼容性**: 代理的身份作为 NFT，可以实现所有权转移和管理委托。

### 2. 声誉注册表 (Reputation Registry)

*   **功能**: 允许客户端代理在任务完成后提供反馈信号，从而建立代理的声誉 。
*   **反馈机制**: 当服务器代理接受任务时，它会签署一个 `feedbackAuth`，授权客户端代理提供反馈。反馈包含一个分数 (0-100)、两个标签 (`tag1`, `tag2`)，以及一个指向链下 JSON 文件的 URI (`FeedbackDataURI`)，该文件包含额外的详细信息，并通过 KECCAK-256 哈希保证完整性。IPFS 等服务可用于存储这些链下反馈数据 [1, 3]。
*   **链上与链下结合**: 声誉的评分和聚合可以在链上进行（为了可组合性），也可以在链下进行（为了更复杂的算法），从而催生出代理评分服务、审计网络和保险池等生态系统。

### 3. 验证注册表 (Validation Registry)

*   **功能**: 提供通用的钩子 (hooks)，用于请求和记录独立的验证者对代理任务执行的检查。
*   **分层信任模型**: 支持多种可插拔的信任模型，安全级别与风险价值成正比 :
    *   **声誉信任 (低风险)**: 适用于内容创建等简单任务，基于累积的客户反馈提供足够的安全性。
    *   **加密经济验证 (中等风险)**: 适用于金融交易或智能合约操作，验证者质押可以被罚没的经济价值，以激励诚实行为。
    *   **加密验证 (高风险)**: 适用于关键应用，利用可信执行环境 (TEEs) (如 Intel SGX) 和零知识证明 (zk-proofs) (如 zkML 证明、zkTLS) 提供计算正确执行的加密保证。
*   **工作流程**: 客户端代理发现并协商任务 -> 服务器代理执行任务并发布数据哈希 -> 服务器代理请求验证 -> 验证者进行验证并返回 `ValidationResponse` -> 客户端代理发布反馈证明 -> 信任建立，支付可从托管中释放 。

### 4. 与现有协议的关系

*   **A2A (Agent-to-Agent)**: ERC-8004 是 A2A 的扩展，弥补了 A2A 在 Web3 环境下缺乏信任层和去中心化发现机制的不足 。
*   **MCP (Model Context Protocol)**: MCP 允许服务器列出并提供其能力（提示、资源、工具等），而 ERC-8004 专注于代理的发现和信任 。
*   **ERC-721**: 身份注册表直接利用了 ERC-721 标准，使得代理身份具备 NFT 的特性 。
## 技术与应用转化逻辑关系

ERC-8004 通过提供一个无需信任的代理协调层，为链上 AI 代理经济的蓬勃发展奠定了基础。其技术特性直接转化为广泛的应用前景。

### 1. 核心价值主张

*   **无需信任的交互**: 解决了代理之间在缺乏预设信任情况下的交互难题，使得开放、跨组织的代理经济成为可能。
*   **可插拔的信任模型**: 提供了多种信任验证机制（声誉、加密经济、TEE/ZK 证明），开发者可以根据任务的风险和价值选择合适的安全级别。
*   **可移植的身份和出处**: 基于 ERC-721 的身份注册表和 Agent Card 使得代理身份具有可移植性，并能无缝跨链引用 。
*   **轻量级链上足迹**: 协议设计注重最小化链上开销，平衡了 Gas 费用与声誉算法、验证和存储协议的灵活性 。

### 2. 主要受益者

*   **再质押服务 (Restaking services)**: 验证注册表为再质押网络提供了中立的钩子，以证明代理任务已被检查，并发布结果。例如，EigenCloud 等再质押网络可以通过其加密经济模型路由验证。
*   **TEE 和证明系统**: ERC-8004 明确支持加密可验证的信任模型，代理可以在 TEE 中运行任务或附加 ZK 证明，验证者发布 `ValidationResponse` 供他人验证。这对于模型推理检查、机密数据使用或链下重计算非常理想。
*   **去中心化 AI 基础设施**: 以太坊有望成为全球 AI 基础设施，ERC-8004 为此提供了关键的信任层。

### 3. 潜在应用场景

ERC-8004 的出现将解锁一系列创新应用，尤其是在需要自动化、信任和数据完整性的领域:

*   **加密深度研究代理**: 专注于特定领域的加密货币市场分析、研究和报告生成。
*   **AI 加密对冲基金**: 代理可以根据自动化的 DeFi 策略的历史业绩被雇佣，实现自动化投资决策。
*   **链上信用评级和自动化信贷**: 基于链上数据和代理评估，实现无需信任的信用评级和信贷发放。
*   **专业代理评分服务**: 针对不同类型的代理提供专业的性能和可靠性评分。
*   **零工经济中的条件里程碑支付**: 任务完成和验证后，自动释放托管资金，确保公平支付。
*   **去中心化 AI 项目目录**: 帮助用户发现和选择可信赖的 AI 代理服务。

## 安全考量

ERC-8004 的安全模型必须解决三个关键维度：在没有先前关系的情况下建立信任、跨组织边界维护声誉完整性以及在对抗性环境中验证真实性。每个维度都存在独特的漏洞，开发者必须理解和缓解这些漏洞。

| 漏洞类型 | 攻击描述 | 缓解措施 |
| :--- | :--- | :--- |
| **域名抢注 (Domain Squatting)** | 攻击者监控内存池中的 `New(AgentDomain, AgentAddress)` 调用，并抢先注册有价值的域名。 | 实施“提交-揭示”方案 (commit-reveal scheme) 进行域名注册，以在提交期间隐藏意图。 |
| **未经授权的反馈授权** | 如果 `AcceptFeedback` 函数缺乏访问控制，任何地址都可以调用它来发出虚假的 `AuthFeedback` 事件，从而污染日志并可能操纵依赖于此的链上预言机。 | 将调用限制为 `msg.sender == resolveAgentAddress(AgentServerID)`，确保只有服务器代理可以授权反馈。 |
| **存储膨胀和 DoS 攻击** | 无限制的 `ValidationRequest` 调用会在映射中存储元组，攻击者可以借此填充存储，增加未来操作的 Gas 成本或阻止清理。 | 通过时间戳在链上自动使条目过期；限制每个 `AgentServerID` 的待处理请求数量；要求在完成时退还的保证金。 |
| **女巫攻击 (Sybil Attack)** | 通过重复调用 `New(AgentDomain, AgentAddress)` 大规模创建代理身份，以操纵声誉系统或对代理经济进行协同攻击。 | 要求每次注册时提供最低保证金或销毁代币，只有在试用期后才可退还；集成零知识证明以确保唯一性（例如，通过钱包签名），以限制每个经济参与者只能拥有一个身份。 |
```
<!-- DAILY_CHECKIN_2025-10-15_END -->
<!-- Content_END -->
## 基础知识点

### 1. 代理经济 (Agent Economy)

代理经济是指由自主或半自主的 AI 代理执行任务、提供服务并相互协作的经济系统。这些代理利用 LLMs、代理框架和工具来自动化和增强业务流程。其核心挑战在于如何让来自不同框架或供应商的代理能够发现、验证、通信和交互。ERC-8004 的出现旨在解决代理经济中的“信任鸿沟”，为预计到2030年将达到1.8万亿美元的全球 AI 市场释放巨大潜力。

### 2. Google A2A 协议及其局限性

Google A2A 协议通过 Agent Card (JSON 格式，包含代理名称、技能、能力等信息) 简化了代理间的发现和通信。它解决了代理在孤立数据系统和应用中交互的难题。然而，A2A 协议假设了客户端代理和服务器代理之间的信任，这与 Web3 追求的去中心化、抗审查和透明性原则相悖。区块链技术通过加密证明系统和不可篡改的链上记录，为信任提供了额外的保障。

### 3. ERC-8004 的定位

ERC-8004 是一个以太坊改进提案 (EIP)，旨在通过区块链技术，为链上代理提供一个无需信任的交互层。它扩展了 A2A 协议，使其能够适应 Web3 的环境，特别是在以太坊虚拟机 (EVM) 链上实现 AI 代理的协调。它采用混合方法，仅在链上存储必要的信任相关数据，而将复杂的操作委托给链下基础设施，从而实现可扩展性。

## 技术逻辑关系

ERC-8004 通过引入三个核心注册表来解决代理发现和信任问题：身份注册表 (Identity Registry)、声誉注册表 (Reputation Registry) 和验证注册表 (Validation Registry)。

### 1. 身份注册表 (Identity Registry)

*   **功能**: 提供代理的链上身份标识，使其可被发现和管理。它基于 **ERC-721** 标准并扩展了 URIStorage 功能，使得所有代理都可以像 NFT 一样被浏览和转移 。
*   **代理标识**: 每个代理通过以下信息在全球范围内唯一标识:
    *   `namespace`: `eip155` (针对 EVM 链)
    *   `chainId`: 区块链网络标识符
    *   `identityRegistry`: ERC-721 注册合约的部署地址
    *   `agentId`: ERC-721 的 `tokenId`，递增分配
*   **代理卡片 (Agent Card)**: `tokenURI` 指向代理的注册文件（JSON 格式），其中包含代理的类型、名称、描述、图片以及各种端点（如 A2A、MCP、ENS、DID、agentWallet 等）。代理可以声明其支持的信任模型（声誉、加密经济、TEE 证明）。
*   **NFT 兼容性**: 代理的身份作为 NFT，可以实现所有权转移和管理委托。

### 2. 声誉注册表 (Reputation Registry)

*   **功能**: 允许客户端代理在任务完成后提供反馈信号，从而建立代理的声誉 。
*   **反馈机制**: 当服务器代理接受任务时，它会签署一个 `feedbackAuth`，授权客户端代理提供反馈。反馈包含一个分数 (0-100)、两个标签 (`tag1`, `tag2`)，以及一个指向链下 JSON 文件的 URI (`FeedbackDataURI`)，该文件包含额外的详细信息，并通过 KECCAK-256 哈希保证完整性。IPFS 等服务可用于存储这些链下反馈数据 [1, 3]。
*   **链上与链下结合**: 声誉的评分和聚合可以在链上进行（为了可组合性），也可以在链下进行（为了更复杂的算法），从而催生出代理评分服务、审计网络和保险池等生态系统。

### 3. 验证注册表 (Validation Registry)

*   **功能**: 提供通用的钩子 (hooks)，用于请求和记录独立的验证者对代理任务执行的检查。
*   **分层信任模型**: 支持多种可插拔的信任模型，安全级别与风险价值成正比 :
    *   **声誉信任 (低风险)**: 适用于内容创建等简单任务，基于累积的客户反馈提供足够的安全性。
    *   **加密经济验证 (中等风险)**: 适用于金融交易或智能合约操作，验证者质押可以被罚没的经济价值，以激励诚实行为。
    *   **加密验证 (高风险)**: 适用于关键应用，利用可信执行环境 (TEEs) (如 Intel SGX) 和零知识证明 (zk-proofs) (如 zkML 证明、zkTLS) 提供计算正确执行的加密保证。
*   **工作流程**: 客户端代理发现并协商任务 -> 服务器代理执行任务并发布数据哈希 -> 服务器代理请求验证 -> 验证者进行验证并返回 `ValidationResponse` -> 客户端代理发布反馈证明 -> 信任建立，支付可从托管中释放 。

### 4. 与现有协议的关系

*   **A2A (Agent-to-Agent)**: ERC-8004 是 A2A 的扩展，弥补了 A2A 在 Web3 环境下缺乏信任层和去中心化发现机制的不足 。
*   **MCP (Model Context Protocol)**: MCP 允许服务器列出并提供其能力（提示、资源、工具等），而 ERC-8004 专注于代理的发现和信任 。
*   **ERC-721**: 身份注册表直接利用了 ERC-721 标准，使得代理身份具备 NFT 的特性 。
## 技术与应用转化逻辑关系

ERC-8004 通过提供一个无需信任的代理协调层，为链上 AI 代理经济的蓬勃发展奠定了基础。其技术特性直接转化为广泛的应用前景。

### 1. 核心价值主张

*   **无需信任的交互**: 解决了代理之间在缺乏预设信任情况下的交互难题，使得开放、跨组织的代理经济成为可能。
*   **可插拔的信任模型**: 提供了多种信任验证机制（声誉、加密经济、TEE/ZK 证明），开发者可以根据任务的风险和价值选择合适的安全级别。
*   **可移植的身份和出处**: 基于 ERC-721 的身份注册表和 Agent Card 使得代理身份具有可移植性，并能无缝跨链引用 。
*   **轻量级链上足迹**: 协议设计注重最小化链上开销，平衡了 Gas 费用与声誉算法、验证和存储协议的灵活性 。

### 2. 主要受益者

*   **再质押服务 (Restaking services)**: 验证注册表为再质押网络提供了中立的钩子，以证明代理任务已被检查，并发布结果。例如，EigenCloud 等再质押网络可以通过其加密经济模型路由验证。
*   **TEE 和证明系统**: ERC-8004 明确支持加密可验证的信任模型，代理可以在 TEE 中运行任务或附加 ZK 证明，验证者发布 `ValidationResponse` 供他人验证。这对于模型推理检查、机密数据使用或链下重计算非常理想。
*   **去中心化 AI 基础设施**: 以太坊有望成为全球 AI 基础设施，ERC-8004 为此提供了关键的信任层。

### 3. 潜在应用场景

ERC-8004 的出现将解锁一系列创新应用，尤其是在需要自动化、信任和数据完整性的领域:

*   **加密深度研究代理**: 专注于特定领域的加密货币市场分析、研究和报告生成。
*   **AI 加密对冲基金**: 代理可以根据自动化的 DeFi 策略的历史业绩被雇佣，实现自动化投资决策。
*   **链上信用评级和自动化信贷**: 基于链上数据和代理评估，实现无需信任的信用评级和信贷发放。
*   **专业代理评分服务**: 针对不同类型的代理提供专业的性能和可靠性评分。
*   **零工经济中的条件里程碑支付**: 任务完成和验证后，自动释放托管资金，确保公平支付。
*   **去中心化 AI 项目目录**: 帮助用户发现和选择可信赖的 AI 代理服务。

## 安全考量

ERC-8004 的安全模型必须解决三个关键维度：在没有先前关系的情况下建立信任、跨组织边界维护声誉完整性以及在对抗性环境中验证真实性。每个维度都存在独特的漏洞，开发者必须理解和缓解这些漏洞。

| 漏洞类型 | 攻击描述 | 缓解措施 |
| :--- | :--- | :--- |
| **域名抢注 (Domain Squatting)** | 攻击者监控内存池中的 `New(AgentDomain, AgentAddress)` 调用，并抢先注册有价值的域名。 | 实施“提交-揭示”方案 (commit-reveal scheme) 进行域名注册，以在提交期间隐藏意图。 |
| **未经授权的反馈授权** | 如果 `AcceptFeedback` 函数缺乏访问控制，任何地址都可以调用它来发出虚假的 `AuthFeedback` 事件，从而污染日志并可能操纵依赖于此的链上预言机。 | 将调用限制为 `msg.sender == resolveAgentAddress(AgentServerID)`，确保只有服务器代理可以授权反馈。 |
| **存储膨胀和 DoS 攻击** | 无限制的 `ValidationRequest` 调用会在映射中存储元组，攻击者可以借此填充存储，增加未来操作的 Gas 成本或阻止清理。 | 通过时间戳在链上自动使条目过期；限制每个 `AgentServerID` 的待处理请求数量；要求在完成时退还的保证金。 |
| **女巫攻击 (Sybil Attack)** | 通过重复调用 `New(AgentDomain, AgentAddress)` 大规模创建代理身份，以操纵声誉系统或对代理经济进行协同攻击。 | 要求每次注册时提供最低保证金或销毁代币，只有在试用期后才可退还；集成零知识证明以确保唯一性（例如，通过钱包签名），以限制每个经济参与者只能拥有一个身份。 |
```
<!-- DAILY_CHECKIN_2025-10-15_END -->



<!-- Content_END -->
