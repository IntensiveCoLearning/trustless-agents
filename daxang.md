---
timezone: UTC+8
---

# fisher

**GitHub ID:** daxang

**Telegram:** @wonderfisherisme

## Self-introduction

独立产品builder，正在搭建读书类网站lessreads，近期上线。区块链爱好者，希望成为一个合格的builder，在2026年成为全职的区块链产品开发者

## Notes
<!-- Content_START -->
# 2025-10-15
<!-- DAILY_CHECKIN_2025-10-15_START -->
```markdown
Google 推出的 A2A (Agent-to-Agent) 协议旨在解决代理间的识别和通信问题，通过“代理卡片”（Agent Card）实现任务执行。然而，A2A 协议在 Web3 的去中心化、抗审查和透明性原则下存在局限性，因为它假设了客户端代理和服务器代理之间的信任。

**ERC-8004** 协议作为 A2A 协议的扩展，旨在为以太坊上的 AI 代理协调提供一个无需信任的层，从而巩固以太坊作为 AI 协调基础的地位。该协议不仅仅是一个新的代币标准，更是自主 AI 代理网络的基础设施。


# 2025.10.15
<!-- DAILY_CHECKIN_2025-10-15_START -->
```markdown
Google 推出的 A2A (Agent-to-Agent) 协议旨在解决代理间的识别和通信问题，通过“代理卡片”（Agent Card）实现任务执行。然而，A2A 协议在 Web3 的去中心化、抗审查和透明性原则下存在局限性，因为它假设了客户端代理和服务器代理之间的信任。

**ERC-8004** 协议作为 A2A 协议的扩展，旨在为以太坊上的 AI 代理协调提供一个无需信任的层，从而巩固以太坊作为 AI 协调基础的地位。该协议不仅仅是一个新的代币标准，更是自主 AI 代理网络的基础设施。

## 基础知识点

### 1. 代理经济 (Agent Economy)

代理经济是指由自主或半自主的 AI 代理执行任务、提供服务并相互协作的经济系统。这些代理利用 LLMs、代理框架和工具来自动化和增强业务流程。其核心挑战在于如何让来自不同框架或供应商的代理能够发现、验证、通信和交互。ERC-8004 的出现旨在解决代理经济中的“信任鸿沟”，为预计到2030年将达到1.8万亿美元的全球 AI 市场释放巨大潜力。

### 2. Google A2A 协议及其局限性

Google A2A 协议通过 Agent Card (JSON 格式，包含代理名称、技能、能力等信息) 简化了代理间的发现和通信。它解决了代理在孤立数据系统和应用中交互的难题。然而，A2A 协议假设了客户端代理和服务器代理之间的信任，这与 Web3 追求的去中心化、抗审查和透明性原则相悖。区块链技术通过加密证明系统和不可篡改的链上记录，为信任提供了额外的保障。

### 3. ERC-8004 的定位

ERC-8004 是一个以太坊改进提案 (EIP)，旨在通过区块链技术，为链上代理提供一个无需信任的交互层。它扩展了 A2A 协议，使其能够适应 Web3 的环境，特别是在以太坊虚拟机 (EVM) 链上实现 AI 代理的协调。它采用混合方法，仅在链上存储必要的信任相关数据，而将复杂的操作委托给链下基础设施，从而实现可扩展性。

## 技术逻辑关系

ERC-8004 通过引入三个核心注册表来解决代理发现和信任问题：身份注册表 (Identity Registry)、声誉注册表 (Reputation Registry) 和验证注册表 (Validation Registry)。

### 1. 身份注册表 (Identity Registry)

*   **功能**: 提供代理的链上身份标识，使其可被发现和管理。它基于 **ERC-721** 标准并扩展了 URIStorage 功能，使得所有代理都可以像 NFT 一样被浏览和转移 。
*   **代理标识**: 每个代理通过以下信息在全球范围内唯一标识:
    *   `namespace`: `eip155` (针对 EVM 链)
    *   `chainId`: 区块链网络标识符
    *   `identityRegistry`: ERC-721 注册合约的部署地址
    *   `agentId`: ERC-721 的 `tokenId`，递增分配
*   **代理卡片 (Agent Card)**: `tokenURI` 指向代理的注册文件（JSON 格式），其中包含代理的类型、名称、描述、图片以及各种端点（如 A2A、MCP、ENS、DID、agentWallet 等）。代理可以声明其支持的信任模型（声誉、加密经济、TEE 证明）。
*   **NFT 兼容性**: 代理的身份作为 NFT，可以实现所有权转移和管理委托。

### 2. 声誉注册表 (Reputation Registry)

*   **功能**: 允许客户端代理在任务完成后提供反馈信号，从而建立代理的声誉 。
*   **反馈机制**: 当服务器代理接受任务时，它会签署一个 `feedbackAuth`，授权客户端代理提供反馈。反馈包含一个分数 (0-100)、两个标签 (`tag1`, `tag2`)，以及一个指向链下 JSON 文件的 URI (`FeedbackDataURI`)，该文件包含额外的详细信息，并通过 KECCAK-256 哈希保证完整性。IPFS 等服务可用于存储这些链下反馈数据 [1, 3]。
*   **链上与链下结合**: 声誉的评分和聚合可以在链上进行（为了可组合性），也可以在链下进行（为了更复杂的算法），从而催生出代理评分服务、审计网络和保险池等生态系统。

### 3. 验证注册表 (Validation Registry)

*   **功能**: 提供通用的钩子 (hooks)，用于请求和记录独立的验证者对代理任务执行的检查。
*   **分层信任模型**: 支持多种可插拔的信任模型，安全级别与风险价值成正比 :
    *   **声誉信任 (低风险)**: 适用于内容创建等简单任务，基于累积的客户反馈提供足够的安全性。
    *   **加密经济验证 (中等风险)**: 适用于金融交易或智能合约操作，验证者质押可以被罚没的经济价值，以激励诚实行为。
    *   **加密验证 (高风险)**: 适用于关键应用，利用可信执行环境 (TEEs) (如 Intel SGX) 和零知识证明 (zk-proofs) (如 zkML 证明、zkTLS) 提供计算正确执行的加密保证。
*   **工作流程**: 客户端代理发现并协商任务 -> 服务器代理执行任务并发布数据哈希 -> 服务器代理请求验证 -> 验证者进行验证并返回 `ValidationResponse` -> 客户端代理发布反馈证明 -> 信任建立，支付可从托管中释放 。

### 4. 与现有协议的关系

*   **A2A (Agent-to-Agent)**: ERC-8004 是 A2A 的扩展，弥补了 A2A 在 Web3 环境下缺乏信任层和去中心化发现机制的不足 。
*   **MCP (Model Context Protocol)**: MCP 允许服务器列出并提供其能力（提示、资源、工具等），而 ERC-8004 专注于代理的发现和信任 。
*   **ERC-721**: 身份注册表直接利用了 ERC-721 标准，使得代理身份具备 NFT 的特性 。
## 技术与应用转化逻辑关系

ERC-8004 通过提供一个无需信任的代理协调层，为链上 AI 代理经济的蓬勃发展奠定了基础。其技术特性直接转化为广泛的应用前景。

### 1. 核心价值主张

*   **无需信任的交互**: 解决了代理之间在缺乏预设信任情况下的交互难题，使得开放、跨组织的代理经济成为可能。
*   **可插拔的信任模型**: 提供了多种信任验证机制（声誉、加密经济、TEE/ZK 证明），开发者可以根据任务的风险和价值选择合适的安全级别。
*   **可移植的身份和出处**: 基于 ERC-721 的身份注册表和 Agent Card 使得代理身份具有可移植性，并能无缝跨链引用 。
*   **轻量级链上足迹**: 协议设计注重最小化链上开销，平衡了 Gas 费用与声誉算法、验证和存储协议的灵活性 。

### 2. 主要受益者

*   **再质押服务 (Restaking services)**: 验证注册表为再质押网络提供了中立的钩子，以证明代理任务已被检查，并发布结果。例如，EigenCloud 等再质押网络可以通过其加密经济模型路由验证。
*   **TEE 和证明系统**: ERC-8004 明确支持加密可验证的信任模型，代理可以在 TEE 中运行任务或附加 ZK 证明，验证者发布 `ValidationResponse` 供他人验证。这对于模型推理检查、机密数据使用或链下重计算非常理想。
*   **去中心化 AI 基础设施**: 以太坊有望成为全球 AI 基础设施，ERC-8004 为此提供了关键的信任层。

### 3. 潜在应用场景

ERC-8004 的出现将解锁一系列创新应用，尤其是在需要自动化、信任和数据完整性的领域:

*   **加密深度研究代理**: 专注于特定领域的加密货币市场分析、研究和报告生成。
*   **AI 加密对冲基金**: 代理可以根据自动化的 DeFi 策略的历史业绩被雇佣，实现自动化投资决策。
*   **链上信用评级和自动化信贷**: 基于链上数据和代理评估，实现无需信任的信用评级和信贷发放。
*   **专业代理评分服务**: 针对不同类型的代理提供专业的性能和可靠性评分。
*   **零工经济中的条件里程碑支付**: 任务完成和验证后，自动释放托管资金，确保公平支付。
*   **去中心化 AI 项目目录**: 帮助用户发现和选择可信赖的 AI 代理服务。

## 安全考量

ERC-8004 的安全模型必须解决三个关键维度：在没有先前关系的情况下建立信任、跨组织边界维护声誉完整性以及在对抗性环境中验证真实性。每个维度都存在独特的漏洞，开发者必须理解和缓解这些漏洞。

| 漏洞类型 | 攻击描述 | 缓解措施 |
| :--- | :--- | :--- |
| **域名抢注 (Domain Squatting)** | 攻击者监控内存池中的 `New(AgentDomain, AgentAddress)` 调用，并抢先注册有价值的域名。 | 实施“提交-揭示”方案 (commit-reveal scheme) 进行域名注册，以在提交期间隐藏意图。 |
| **未经授权的反馈授权** | 如果 `AcceptFeedback` 函数缺乏访问控制，任何地址都可以调用它来发出虚假的 `AuthFeedback` 事件，从而污染日志并可能操纵依赖于此的链上预言机。 | 将调用限制为 `msg.sender == resolveAgentAddress(AgentServerID)`，确保只有服务器代理可以授权反馈。 |
| **存储膨胀和 DoS 攻击** | 无限制的 `ValidationRequest` 调用会在映射中存储元组，攻击者可以借此填充存储，增加未来操作的 Gas 成本或阻止清理。 | 通过时间戳在链上自动使条目过期；限制每个 `AgentServerID` 的待处理请求数量；要求在完成时退还的保证金。 |
| **女巫攻击 (Sybil Attack)** | 通过重复调用 `New(AgentDomain, AgentAddress)` 大规模创建代理身份，以操纵声誉系统或对代理经济进行协同攻击。 | 要求每次注册时提供最低保证金或销毁代币，只有在试用期后才可退还；集成零知识证明以确保唯一性（例如，通过钱包签名），以限制每个经济参与者只能拥有一个身份。 |
```
<!-- DAILY_CHECKIN_2025-10-15_END -->
<!-- Content_END -->
## 基础知识点

### 1. 代理经济 (Agent Economy)

代理经济是指由自主或半自主的 AI 代理执行任务、提供服务并相互协作的经济系统。这些代理利用 LLMs、代理框架和工具来自动化和增强业务流程。其核心挑战在于如何让来自不同框架或供应商的代理能够发现、验证、通信和交互。ERC-8004 的出现旨在解决代理经济中的“信任鸿沟”，为预计到2030年将达到1.8万亿美元的全球 AI 市场释放巨大潜力。

### 2. Google A2A 协议及其局限性

Google A2A 协议通过 Agent Card (JSON 格式，包含代理名称、技能、能力等信息) 简化了代理间的发现和通信。它解决了代理在孤立数据系统和应用中交互的难题。然而，A2A 协议假设了客户端代理和服务器代理之间的信任，这与 Web3 追求的去中心化、抗审查和透明性原则相悖。区块链技术通过加密证明系统和不可篡改的链上记录，为信任提供了额外的保障。

### 3. ERC-8004 的定位

ERC-8004 是一个以太坊改进提案 (EIP)，旨在通过区块链技术，为链上代理提供一个无需信任的交互层。它扩展了 A2A 协议，使其能够适应 Web3 的环境，特别是在以太坊虚拟机 (EVM) 链上实现 AI 代理的协调。它采用混合方法，仅在链上存储必要的信任相关数据，而将复杂的操作委托给链下基础设施，从而实现可扩展性。

## 技术逻辑关系

ERC-8004 通过引入三个核心注册表来解决代理发现和信任问题：身份注册表 (Identity Registry)、声誉注册表 (Reputation Registry) 和验证注册表 (Validation Registry)。

### 1. 身份注册表 (Identity Registry)

*   **功能**: 提供代理的链上身份标识，使其可被发现和管理。它基于 **ERC-721** 标准并扩展了 URIStorage 功能，使得所有代理都可以像 NFT 一样被浏览和转移 。
*   **代理标识**: 每个代理通过以下信息在全球范围内唯一标识:
    *   `namespace`: `eip155` (针对 EVM 链)
    *   `chainId`: 区块链网络标识符
    *   `identityRegistry`: ERC-721 注册合约的部署地址
    *   `agentId`: ERC-721 的 `tokenId`，递增分配
*   **代理卡片 (Agent Card)**: `tokenURI` 指向代理的注册文件（JSON 格式），其中包含代理的类型、名称、描述、图片以及各种端点（如 A2A、MCP、ENS、DID、agentWallet 等）。代理可以声明其支持的信任模型（声誉、加密经济、TEE 证明）。
*   **NFT 兼容性**: 代理的身份作为 NFT，可以实现所有权转移和管理委托。

### 2. 声誉注册表 (Reputation Registry)

*   **功能**: 允许客户端代理在任务完成后提供反馈信号，从而建立代理的声誉 。
*   **反馈机制**: 当服务器代理接受任务时，它会签署一个 `feedbackAuth`，授权客户端代理提供反馈。反馈包含一个分数 (0-100)、两个标签 (`tag1`, `tag2`)，以及一个指向链下 JSON 文件的 URI (`FeedbackDataURI`)，该文件包含额外的详细信息，并通过 KECCAK-256 哈希保证完整性。IPFS 等服务可用于存储这些链下反馈数据 [1, 3]。
*   **链上与链下结合**: 声誉的评分和聚合可以在链上进行（为了可组合性），也可以在链下进行（为了更复杂的算法），从而催生出代理评分服务、审计网络和保险池等生态系统。

### 3. 验证注册表 (Validation Registry)

*   **功能**: 提供通用的钩子 (hooks)，用于请求和记录独立的验证者对代理任务执行的检查。
*   **分层信任模型**: 支持多种可插拔的信任模型，安全级别与风险价值成正比 :
    *   **声誉信任 (低风险)**: 适用于内容创建等简单任务，基于累积的客户反馈提供足够的安全性。
    *   **加密经济验证 (中等风险)**: 适用于金融交易或智能合约操作，验证者质押可以被罚没的经济价值，以激励诚实行为。
    *   **加密验证 (高风险)**: 适用于关键应用，利用可信执行环境 (TEEs) (如 Intel SGX) 和零知识证明 (zk-proofs) (如 zkML 证明、zkTLS) 提供计算正确执行的加密保证。
*   **工作流程**: 客户端代理发现并协商任务 -> 服务器代理执行任务并发布数据哈希 -> 服务器代理请求验证 -> 验证者进行验证并返回 `ValidationResponse` -> 客户端代理发布反馈证明 -> 信任建立，支付可从托管中释放 。

### 4. 与现有协议的关系

*   **A2A (Agent-to-Agent)**: ERC-8004 是 A2A 的扩展，弥补了 A2A 在 Web3 环境下缺乏信任层和去中心化发现机制的不足 。
*   **MCP (Model Context Protocol)**: MCP 允许服务器列出并提供其能力（提示、资源、工具等），而 ERC-8004 专注于代理的发现和信任 。
*   **ERC-721**: 身份注册表直接利用了 ERC-721 标准，使得代理身份具备 NFT 的特性 。
## 技术与应用转化逻辑关系

ERC-8004 通过提供一个无需信任的代理协调层，为链上 AI 代理经济的蓬勃发展奠定了基础。其技术特性直接转化为广泛的应用前景。

### 1. 核心价值主张

*   **无需信任的交互**: 解决了代理之间在缺乏预设信任情况下的交互难题，使得开放、跨组织的代理经济成为可能。
*   **可插拔的信任模型**: 提供了多种信任验证机制（声誉、加密经济、TEE/ZK 证明），开发者可以根据任务的风险和价值选择合适的安全级别。
*   **可移植的身份和出处**: 基于 ERC-721 的身份注册表和 Agent Card 使得代理身份具有可移植性，并能无缝跨链引用 。
*   **轻量级链上足迹**: 协议设计注重最小化链上开销，平衡了 Gas 费用与声誉算法、验证和存储协议的灵活性 。

### 2. 主要受益者

*   **再质押服务 (Restaking services)**: 验证注册表为再质押网络提供了中立的钩子，以证明代理任务已被检查，并发布结果。例如，EigenCloud 等再质押网络可以通过其加密经济模型路由验证。
*   **TEE 和证明系统**: ERC-8004 明确支持加密可验证的信任模型，代理可以在 TEE 中运行任务或附加 ZK 证明，验证者发布 `ValidationResponse` 供他人验证。这对于模型推理检查、机密数据使用或链下重计算非常理想。
*   **去中心化 AI 基础设施**: 以太坊有望成为全球 AI 基础设施，ERC-8004 为此提供了关键的信任层。

### 3. 潜在应用场景

ERC-8004 的出现将解锁一系列创新应用，尤其是在需要自动化、信任和数据完整性的领域:

*   **加密深度研究代理**: 专注于特定领域的加密货币市场分析、研究和报告生成。
*   **AI 加密对冲基金**: 代理可以根据自动化的 DeFi 策略的历史业绩被雇佣，实现自动化投资决策。
*   **链上信用评级和自动化信贷**: 基于链上数据和代理评估，实现无需信任的信用评级和信贷发放。
*   **专业代理评分服务**: 针对不同类型的代理提供专业的性能和可靠性评分。
*   **零工经济中的条件里程碑支付**: 任务完成和验证后，自动释放托管资金，确保公平支付。
*   **去中心化 AI 项目目录**: 帮助用户发现和选择可信赖的 AI 代理服务。

## 安全考量

ERC-8004 的安全模型必须解决三个关键维度：在没有先前关系的情况下建立信任、跨组织边界维护声誉完整性以及在对抗性环境中验证真实性。每个维度都存在独特的漏洞，开发者必须理解和缓解这些漏洞。

| 漏洞类型 | 攻击描述 | 缓解措施 |
| :--- | :--- | :--- |
| **域名抢注 (Domain Squatting)** | 攻击者监控内存池中的 `New(AgentDomain, AgentAddress)` 调用，并抢先注册有价值的域名。 | 实施“提交-揭示”方案 (commit-reveal scheme) 进行域名注册，以在提交期间隐藏意图。 |
| **未经授权的反馈授权** | 如果 `AcceptFeedback` 函数缺乏访问控制，任何地址都可以调用它来发出虚假的 `AuthFeedback` 事件，从而污染日志并可能操纵依赖于此的链上预言机。 | 将调用限制为 `msg.sender == resolveAgentAddress(AgentServerID)`，确保只有服务器代理可以授权反馈。 |
| **存储膨胀和 DoS 攻击** | 无限制的 `ValidationRequest` 调用会在映射中存储元组，攻击者可以借此填充存储，增加未来操作的 Gas 成本或阻止清理。 | 通过时间戳在链上自动使条目过期；限制每个 `AgentServerID` 的待处理请求数量；要求在完成时退还的保证金。 |
| **女巫攻击 (Sybil Attack)** | 通过重复调用 `New(AgentDomain, AgentAddress)` 大规模创建代理身份，以操纵声誉系统或对代理经济进行协同攻击。 | 要求每次注册时提供最低保证金或销毁代币，只有在试用期后才可退还；集成零知识证明以确保唯一性（例如，通过钱包签名），以限制每个经济参与者只能拥有一个身份。 |
```
<!-- DAILY_CHECKIN_2025-10-15_END -->



<!-- Content_END -->
