---
timezone: UTC+8
---

# D

**GitHub ID:** t19971104

**Telegram:** @13817399983

## Self-introduction

KEEP LEARNING

## Notes

<!-- Content_START -->
# 2025-10-16
<!-- DAILY_CHECKIN_2025-10-16_START -->
**Module 1: The Trust Foundation — ERC-8004 Identity & Reputation Layer** 的标准、设计原理、实际动手环节及生态意义。  
分为 5 个部分：**概念框架 / 标准解析 / 技术组成 / 实践环节 / 延伸阅读与思考。**

* * *

## 一、概念框架：The Trust Foundation

**核心主题：建立可信身份与声誉层，为 Agent 经济提供信任基础。**

> 在 Web3 Agent 生态中，身份（Identity）与声誉（Reputation）是智能体之间互动、协作与交易的信任基石。  
> ERC-8004 的目标是为 “智能体（Agent）” 提供可验证、可追踪、可组合的身份与信誉体系。

**关键词：**

-   **On-chain Identity:** 区块链原生身份标识（类似 DID）。
    
-   **Reputation Layer:** 声誉记录与评分机制。
    
-   **Verification Layer:** 认证、证明与可验证凭证。
    
-   **Composable Trust:** 信任是模块化、可移植的（信任可以从一个协议迁移到另一个协议）。
    

* * *

## 二、标准解析：ERC-8004 核心结构

ERC-8004 定义了 **三个主要 Registry（注册表）**，共同构成 Identity-Reputation-Verification 三层信任结构。

### Identity Registry — 身份注册表

-   功能：为每个实体（人 / 智能体 / 组织）创建一个唯一链上身份 ID。
    
-   支持：DID, ENS, Soulbound Token（SBT）等扩展形式。
    
-   通常存储：
    
    -   `identityId`
        
    -   `ownerAddress`
        
    -   `metadataURI`
        
    -   `linkedAccounts`（多链或跨协议账户）
        

📌 _重点概念：_  
可组合身份（Composable Identity）—— 一个身份可以关联多个钱包、协议和平台。

* * *

### Reputation Registry — 声誉注册表

-   功能：存储、更新并公开一个身份的声誉数据。
    
-   声誉可来源于：
    
    -   On-chain 数据（交易记录、参与行为）
        
    -   Off-chain 数据（平台反馈、审计评分）
        
    -   Verified Attestations（可验证声明）
        
-   声誉指标示例：
    
    -   贡献度（Contribution Score）
        
    -   可信度（Trust Score）
        
    -   稳定性（Activity/Consistency Score）
        

_重点机制：_

-   声誉是动态的（可更新）
    
-   声誉是可验证的（带签名来源）
    
-   声誉是可继承的（跨平台复用）
    

* * *

### Verification Registry — 验证注册表

-   功能：存储身份或声誉的验证凭证（VC / Attestation）。
    
-   常用于：
    
    -   实名验证（KYC / KYB）
        
    -   信誉背书（Reputation Endorsement）
        
    -   技能认证（Skill Badge）
        
-   实现可采用：
    
    -   EIP-712 typed data
        
    -   AttestationStation (EAS)
        
    -   W3C Verifiable Credentials
        

_重点机制：_  
通过链上 attestation 机制实现“去中心化的信任背书”。

* * *

## 三、技术组成：实现逻辑与交互模型

**主要合约模块：**

```solidity
interface IERC8004IdentityRegistry { ... }
interface IERC8004ReputationRegistry { ... }
interface IERC8004VerificationRegistry { ... }
```

**数据流逻辑：**

```
Agent 创建身份 → Identity Registry 注册 → 
行为与交互产生声誉数据 → Reputation Registry 更新 → 
验证方提供签名证明 → Verification Registry 存档
```

**合约间交互图：**

```
 ┌─────────────────────────┐
 │  Identity Registry      │  ← 创建身份
 └─────────────┬───────────┘
               │
               ▼
 ┌─────────────────────────┐
 │  Reputation Registry    │  ← 收集/存储信誉
 └─────────────┬───────────┘
               │
               ▼
 ┌─────────────────────────┐
 │  Verification Registry  │  ← 验证/背书/证明
 └─────────────────────────┘
```

* * *

## 四、实践环节（Hands-on）

### Step 1: 创建一个链上身份

使用 Solidity 实现一个简单的 ERC-8004 Identity Registry 合约：

```solidity
contract SimpleIdentityRegistry {
    struct Identity {
        address owner;
        string metadataURI;
    }

    mapping(address => Identity) public identities;

    function registerIdentity(string calldata uri) external {
        require(identities[msg.sender].owner == address(0), "Already registered");
        identities[msg.sender] = Identity(msg.sender, uri);
    }

    function getIdentity(address user) external view returns (Identity memory) {
        return identities[user];
    }
}
```

### Step 2: 实现一个简单的 off-chain reputation feedback system

可以使用 **Next.js + Supabase / Firebase** 搭建一个声誉反馈后端：

```js
// Example: submit feedback
await db.insert({
  from: userAddress,
  to: agentAddress,
  score: 4.5,
  comment: "Very reliable response quality."
});
```

然后使用签名（EIP-712）将反馈上链更新 Reputation Registry。

* * *

### Step 3: Agent 与身份绑定

为你的 AI Agent / Bot 创建一个链上身份：

-   通过 `registerIdentity()` 上链；
    
-   在 agent 配置文件中（如 YAML / JSON）绑定该链上地址；
    
-   Agent 交互日志中引用该 identityId。
    

* * *

## 五、延伸阅读与思考

| 来源 | 内容摘要 | 重点 |
| --- | --- | --- |
| EIP-8004 Official Standard | 标准定义与接口设计 | 核心结构、接口说明 |
| Ethereum Magicians Discussion | 标准提案讨论 | 社区对身份模型的反馈 |
| Quill Audits Analysis | 审计角度解读 | 安全性与合约可扩展性 |
| Medium - ERC-8004 Story & Next Steps | 背后理念与应用方向 | 从 DID → Agent Identity 的演化 |
| Vistara Apps Example | 开源实现案例 | Registry 与 UI 结合 |
| HashKey Capital - ERC-8004 & Agent Economy | 投资与生态分析 | 信任层对 Agent 经济的价值 |

* * *

## 六、总结与未来趋势

| 维度 | 未来演进方向 |
| --- | --- |
| 技术 | 与 ERC-6551 (Token Bound Account) / ERC-780 (Claim Registry) / EAS 集成 |
| 经济 | 声誉作为资产，可抵押、租赁、交易 |
| 社会 | 实现去中心化信用体系、社区治理信任度模型 |
| AI Agent | 每个智能体拥有链上身份与声誉，支持自治与协作 |

* * *
<!-- DAILY_CHECKIN_2025-10-16_END -->
<!-- Content_END -->
